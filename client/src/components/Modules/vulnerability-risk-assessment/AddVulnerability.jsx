import { useState } from 'react';
import Popup from '../../utils/Popup';

const AddVulnerability = ({
  showAddVulnerabilityPopup,
  setShowAddVulnerabilityPopup,
  onAddVulnerabilitySubmit
}) => {
  const [newVulnerability, setNewVulnerability] = useState({
    description: '',
    severity: '',
    asset_id: '',
    risk_score: ''
  });

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setNewVulnerability({ ...newVulnerability, [name]: value });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    onAddVulnerabilitySubmit(newVulnerability);
    setNewVulnerability({ description: '', severity: '', asset_id: '', risk_score: '' });
  };

  if (!showAddVulnerabilityPopup) return null;

  return (
    <Popup>
      <h3>Add New Vulnerability</h3>
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          name="description"
          placeholder="Enter Description"
          value={newVulnerability.description}
          onChange={handleInputChange}
          required
        />
        <input
          type="text"
          name="severity"
          placeholder="Enter Severity (e.g., Low, Medium, High)"
          value={newVulnerability.severity}
          onChange={handleInputChange}
          required
        />
        <input
          type="number"
          name="asset_id"
          placeholder="Enter Asset ID"
          value={newVulnerability.asset_id}
          onChange={handleInputChange}
          required
        />
        <input
          type="number"
          step="0.1"
          name="risk_score"
          placeholder="Enter Risk Score"
          value={newVulnerability.risk_score}
          onChange={handleInputChange}
          required
        />
        <button type="submit">Add</button>
        <button className="button-cancel" type="button" onClick={() => setShowAddVulnerabilityPopup(false)}>Cancel</button>
      </form>
    </Popup>
  );
};

export default AddVulnerability;
